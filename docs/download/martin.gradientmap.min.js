Martin.extend({gradientMap:function(t,r){function n(t){"#"===t.charAt(0)&&(t=t.slice(1)),3===t.length&&(t=t.split(""),t.splice(2,0,t[2]),t.splice(1,0,t[1]),t.splice(0,0,t[0]),t=t.join(""));var r=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,n=r.exec(t);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}var a=this,e=(this.layers,n(t)),i=n(r);return Martin.Effect.prototype.gradientMap||(Martin.Effect.prototype.gradientMap=function(){{var t=this.layer,r=this.amount.min,n=this.amount.max,a=0;t.loop(function(t,e,i){return i.r=Math.round(r.r+i.r/256*(n.r-r.r)),i.g=Math.round(r.g+i.g/256*(n.g-r.g)),i.b=Math.round(r.b+i.b/256*(n.b-r.b)),a++,i})}return this}),new Martin.Effect("gradientMap",a,{max:i,min:e}),this.render()}});